<h1 id="lupine-press"><a class="header-anchor" href="#lupine-press">#</a>lupine.press</h1><p><code>lupine.press</code> 是一个基于 <code>lupine.web</code> 构建的轻量级、高性能的文档网站框架。它提供了一套完整的解决方案，用于渲染基于 Markdown 的文档网站，支持响应式布局、侧边栏导航和主题切换。</p>
<p>它旨在与 <code>lupine</code> 生态系统无缝协作，为如 LupineJS 官方文档等站点提供支持。</p>
<h2 id="主要特性-features"><a class="header-anchor" href="#主要特性-features">#</a>主要特性 (Features)</h2><ul>
<li><strong>响应式布局 (Responsive Layout)</strong>: 内置的 <code>PressFrame</code> 提供了标准的文档布局，包含头部、响应式侧边栏和内容区域。</li>
<li><strong>Markdown 渲染 (Markdown Rendering)</strong>: 针对 Markdown 生成的内容进行了优化，支持语法高亮和标准排版。</li>
<li><strong>侧边栏导航 (Sidebar Navigation)</strong>: 根据您的配置自动生成多级侧边栏。</li>
<li><strong>主题支持 (Theming)</strong>: 通过 <code>lupine.components</code> 主题系统内置支持多种主题（如亮色/暗色模式）。</li>
<li><strong>路由集成 (Routing)</strong>: 与 <code>PageRouter</code> 显式集成，用于处理客户端导航。</li>
<li><strong>多语言支持 (Multilingual Support)</strong>: 自动扫描多语言目录的 markdown 文件，多语言显示切换。</li>
</ul>
<h2 id="使用指南-usage-guide"><a class="header-anchor" href="#使用指南-usage-guide">#</a>使用指南 (Usage Guide)</h2><p>要使用 <code>lupine.press</code>，您通常需要设置一个 <code>lupine.web</code> 应用程序，并将其配置为使用 <code>PressPage</code> 作为主路由处理程序。</p>
<h3 id="1-前提条件-prerequisites"><a class="header-anchor" href="#1-前提条件-prerequisites">#</a>1. 前提条件 (Prerequisites)</h3><p>确保您的项目中已安装 <code>lupine.press</code>。</p>
<h3 id="2-基本设置-basic-setup"><a class="header-anchor" href="#2-基本设置-basic-setup">#</a>2. 基本设置 (Basic Setup)</h3><p>在您的应用程序入口点（例如 <code>src/index.tsx</code>）中，您需要绑定必要的配置并设置路由器。</p>
<pre><code class="language-typescript">import { bindRouter, PageRouter, bindTheme, bindLang, setDefaultPageTitle } from &#39;lupine.components&#39;;
import { bindPressData, PressPage, pressThemes } from &#39;lupine.press&#39;;
import { markdownConfig } from &#39;./markdown-config&#39;; // 您生成的 markdown 数据

// 1. 初始化核心设置
bindLang(&#39;en&#39;, {}); // 设置默认语言
bindTheme(&#39;light&#39;, pressThemes); // 绑定主题（包含 press 特定的样式）
setDefaultPageTitle(&#39;My Documentation&#39;);

// 2. 绑定文档数据
// markdownConfig 是一个包含从 markdown 文件生成的 HTML 内容和元数据的对象。
bindPressData(markdownConfig);

// 3. 配置路由器
const pageRouter = new PageRouter();
//将所有请求路由到 PressPage，PressPage 会处理在 markdownConfig 中查找内容
pageRouter.use(&#39;*&#39;, PressPage);

// 4. 启动应用程序
bindRouter(pageRouter);
</code></pre>
<h3 id="3-数据结构-markdownconfig"><a class="header-anchor" href="#3-数据结构-markdownconfig">#</a>3. 数据结构 (<code>markdownConfig</code>)</h3><p><code>bindPressData</code> 函数期望一个配置对象，其中键是路由路径（例如 <code>/guide/started</code>），值包含内容和元数据。</p>
<p>通常，此数据是在构建时从您的 Markdown 文件生成的。</p>
<pre><code class="language-typescript">export const markdownConfig = {
  &#39;/en/guide/started&#39;: {
    html: &#39;&lt;h1&gt;Getting Started&lt;/h1&gt;&lt;p&gt;...&lt;/p&gt;&#39;, // 预渲染的 HTML 内容
    data: {
      title: &#39;Getting Started&#39;,
      sidebar: [
        // 当前页面上下文的侧边栏配置
        { type: &#39;group&#39;, text: &#39;Guide&#39;, level: 0 },
        { type: &#39;link&#39;, text: &#39;Installation&#39;, link: &#39;/en/guide/install&#39;, level: 1 },
      ],
    },
    headings: [{ level: 2, text: &#39;Prerequisites&#39;, id: &#39;prerequisites&#39; }],
  },
  // ... 其他页面
};
</code></pre>
<h2 id="markdown-文件结构与关联-markdown-file-structure-association"><a class="header-anchor" href="#markdown-文件结构与关联-markdown-file-structure-association">#</a>Markdown 文件结构与关联 (Markdown File Structure &amp; Association)</h2><h3 id="顶层配置-top-level-configuration"><a class="header-anchor" href="#顶层配置-top-level-configuration">#</a>顶层配置 (Top-level Configuration)</h3><p>在 Markdown 文件的顶层目录（根目录），必须存在一个 <code>index.md</code> 文件。该文件使用 <code>lang</code> 字段来指定站点支持的所有语言。</p>
<pre><code class="language-yaml">---
lang:
  - title: English
    id: en
  - title: 简体中文
    id: zh
---
</code></pre>
<h3 id="多语言配置-multilingual-configuration"><a class="header-anchor" href="#多语言配置-multilingual-configuration">#</a>多语言配置 (Multilingual Configuration)</h3><p>每个语言 ID（如 <code>en</code>, <code>zh</code>）对应一个子目录，且该目录下必须有一个 <code>index.md</code> 文件。此文件用于配置该语言版本的布局、标题、侧边栏宽度等全局设置。该语言的所有 Markdown 内容文件都应存放于此目录或其子目录中。</p>
<p><code>index.md</code> 支持定义以下内容：</p>
<ul>
<li><strong>Hero &amp; Features</strong>: 首页大图和特性介绍。</li>
<li><strong>Nav</strong>: 顶部的导航链接。</li>
<li><strong>GitHub</strong>: GitHub 仓库链接。</li>
<li><strong>Sidebar</strong>: 侧边栏菜单配置（核心参数）。</li>
</ul>
<h3 id="侧边栏配置-sidebar-configuration"><a class="header-anchor" href="#侧边栏配置-sidebar-configuration">#</a>侧边栏配置 (Sidebar Configuration)</h3><p><code>sidebar</code> 参数是一个数组，支持三种配置模式：</p>
<ol>
<li><strong>子菜单模式 (<code>submenu</code>)</strong>:
指向一个子目录。系统会自动展开该子目录下的 <code>index.md</code> 中定义的 <code>sidebar</code> 配置，并将其内容合并到当前级别。</li>
<li><strong>分组模式 (<code>text</code> + <code>items</code>)</strong>:
定义一个菜单组。<code>text</code> 为组标题，<code>items</code> 为该组下的所有链接列表。</li>
<li><strong>扁平模式 (<code>items</code> only)</strong>:
仅定义 <code>items</code> 而不提供 <code>text</code>。此时 <code>items</code> 中的所有链接将直接显示在当前级别，不进行分组。</li>
</ol>
<h2 id="架构-architecture"><a class="header-anchor" href="#架构-architecture">#</a>架构 (Architecture)</h2><ul>
<li><strong><code>PressFrame</code></strong>: 主要布局组件。它处理文档站点的特定 CSS 和结构，确保侧边栏和内容区域独立滚动。</li>
<li><strong><code>PressPage</code></strong>: “控制器”组件。它在绑定的 <code>markdownConfig</code> 中查找当前 URL，检索相应的 HTML 和元数据，并使用正确的侧边栏和内容渲染 <code>PressFrame</code>。</li>
<li><strong><code>pressLoad</code></strong>: 一个导航实用程序，用于处理文档内的链接点击，确保平滑的客户端转换。</li>
</ul>
